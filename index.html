<!DOCTYPE html>
<html lang="en">
<title>Stout Case Study</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="">
<style>
</style>
<script src=""></script>
<body style="background-color:lightseagreen;">

<div class="">
 <h1 style = "text-align:center; font-family:Helvetica">Stout Case Study</h1>
 <h2 style = "text-align:center; font-family:Helvetica">By Jacob Riedl</h1>
 <h2 style = "color:lawngreen; font-family:Helvetica">Description</h2>
  <p style = "color:navy; font-family:Helvetica">The dataset consists of loan data from the Lending Club and includes 10,000 observations on 55 variables. However, there was some missing data for some of the variables such as emp_length and debt_to_income among many other variables. A lot of the variables are also categorical, which makes them much harder to work with from both a regression and random forest perspective.</p>

 <h2 style = "color:lawngreen; font-family:Helvetica">Data Cleaning</h2>
  <p style = "color:navy; font-family:Helvetica"> For the emp_length and debt_to_income, I replaced the NA values with the average of all values that are not null. For the categorical variables used in the regression model, such as loan purpose, grade, and verified income, I replaced these variables with indicator variables of each factor. For instance, I replaced grade with a column for every possible grade A, B, C, etc. I also replaced annual income with joint annual income if it was applicable in a variable called mIncome. 
 
 <h2 style = "color:lawngreen; font-family:Helvetica">Linear Regression Model</h2>
 <div>
  <img src="C:/Users/jried/Documents/Stout/Correlation Matrix.jpg" width = "620" height = "490">
  <img src="C:/Users/jried/Documents/Stout/avplots.jpg" width = "620" height = "490">
 </div>
  <p style = "color:navy; font-family:Helvetica">The linear regression model explains 94.73% of the variability in interest rate. The plot on the left is the correlation matrix of all variables used in the multiple linear regression model, meaning it shows how each variable correlates with all other variables. As you can see, there are some variable combinations that have strong correlations with each other. If I had more time, I would use some kind of transformation to combine the correlated variables and make the model more efficient. The plot on the right is an added variable plot of the most significant predictors of interest_rate. This is used to see how an independent variable is a predictor without the influence of the other independent variables. If I had more time, I would have liked to tweek which variables I used in my model. While an r-squared of .9473 is very high, a lot of the variables used were not significant, so I would like to see if I could have created a more efficient and maybe more accurate model.<p>

 <h2 style = "color:lawngreen; font-family:Helvetica">Random Forest Model</h2>
 <div>
  <img src="C:/Users/jried/Documents/Stout/multiway_importance_plot.jpg" width = "415" height = "310">
  <img src="C:/Users/jried/Documents/Stout/minimal_depth.jpg" width = "415" height = "310">
  <img src="C:/Users/jried/Documents/Stout/importance_graph.jpg" width = "415" height = "310">
 </div> 
  <p style = "color:navy; font-family:Helvetica">The random forest model uses 500 trees and 14 variables tried at each split and produces a mean of squared residuals of 1.53 and % var explain of 94.05%. The plot on the left is a multi-way importance plot which shows the mean depth of first split on the variable on the x-axis, the number of trees in which the root is split on the variable on the y-axis and the size of the node represents the total number of nodes in the forest that split on that variable. The middle plot shows the distribution of minimal depth for top ten variables according to mean minimal depth calculated using top trees. The right plot shows relations between node purity increase, mean minimum depth, number of trees, number of nodes, and the p-value. While the model is relatively accurate, if I had more time I would have increase accuracy by looking at which variables had the smallest minimum depth and removing them from the model to see which variables are valid predictors for interest rate.</p>

</body>
</html>